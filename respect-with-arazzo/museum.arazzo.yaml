arazzo: 1.0.1
info:
  title: Redocly Museum API
  version: 1.1.0
sourceDescriptions:
  - name: openapi
    url: openapi.yaml
    type: openapi
workflows:
  - workflowId: purchaseMuseumTicketForEvent
    description: End to end workflow to purchase a museum event ticket
    steps:
      - stepId: fetchAvailableEvents
        operationId: listSpecialEvents
        successCriteria:
          - condition: $statusCode == 200
        outputs:
          eventId: $response.body#/0/eventId
          eventDate: $response.body#/0/dates/0
      - stepId: purchaseEventTicket
        operationId: buyMuseumTickets
        requestBody:
          contentType: application/json
          payload:
            ticketType: event
            eventId: $steps.fetchAvailableEvents.outputs.eventId
            ticketDate: $steps.fetchAvailableEvents.outputs.eventDate
            email: me@example.com
        successCriteria:
          - condition: $statusCode == 200
        outputs:
          ticketId: $response.body#/ticketId
